'use strict'

const account = require('../account.js')
const tx = require('../tx.js')
const utils = require('../utils.js')

const seedStr = utils.ToBuffer('0xdbbed6816f9d03d3addd5f04a9316d77881b27cde2df176277342f7f5105e505', 32).ToBase58()
const txParamStr = "{\"Cmds\":{\"BuyShare\":null,\"ClosePool\":null,\"Contract\":null,\"PkgClose\":null,\"PkgCreate\":null,\"PkgTransfer\":null,\"RegistPool\":null},\"Fee\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"25000000000000\"},\"From\":{\"PKr\":\"0x06ff292fb802f720ad76e4ea8d98e4a093f09af3bf5a5c6dc9336c821c3e3e03692bebfd129720b01d0f534b4bc8e10dc474a3a9c1171ccfbf308c2c86a788027d34a53dccf687cbd5a9612d03215eebcddd851399f161f18e0b1c3e245b82ac\",\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"},\"Gas\":25000,\"GasPrice\":1000000000,\"Ins\":[{\"A\":null,\"Ar\":null,\"ArOld\":null,\"CC\":null,\"Out\":{\"Root\":\"0x4f7c0e0fc22b84f739c2dfc0951e4e73443c40d785a1dea1fd7651c15435d583\",\"State\":{\"Num\":3,\"OS\":{\"Index\":6,\"OutCM\":\"0x9bf4aa3a336a7be84ac76415c7d0275c62e6f78ffabef44a86e42c7c1b61839b\",\"Out_C\":null,\"Out_O\":{\"Addr\":\"0xa6834ed43f2fd19a1d82f9aa2a42cf54efa26fdda9dcb2d46c106f389b62ef1566313ad619a62f40acebef1f766cb90cd91484826c0fce2ea06a6c13e4684205a894a7f520377a9f71ad35628374e336951fc51062510779e7665e61aa783511\",\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"65000000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"},\"Out_P\":null,\"Out_Z\":null,\"RootCM\":\"0xf10eaf0779ef1c0ba3c4e9032381b3e4092e3bdbdcdc369f4bb345970c22f7a6\"},\"TxHash\":\"0x509745a7c91584edfc6d226984c9d782e57a7b52161b25b208e020296c0ef320\"}},\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"Vskr\":null,\"Witness\":{\"Anchor\":\"0x8d3fd61a21074cb2626c1901e10cefb4b4fa313f8a18ff34881fcf4073523c0e\",\"Paths\":[\"0xdddd37b6051947603e79014310bc30ae74a2e50fd4936f2a5ffa959956efa605\",\"0xb5669ac9c54005884f627e53c1d2b8533299b5a1066f97f9c0dc6a61acb32115\",\"0x4b825fb0cd04d15e1a77bbdf8ec52abacf321394e6b62547ea1135613c6af592\",\"0x47f3115ed518bf4653b9d967825cd1d3f4b0fdfb2ff3d1d56cecc29feed9d623\",\"0x271be13d21bb65d68ddde723fe4c94c4f3b6166aabe45a685b357ccb286a442c\",\"0x9970271e96d1771eff06ce5c540d6fcf5df59234af6204f45b31ea151c589ba9\",\"0x6eb9d1bbaad7ae8e1ad41b2be597da14321efdbc9c7f4358e6525789d4318c8b\",\"0xa0f4e174f7fe46368a2c4ed56659c672e0187d0bca2e7619660b9e38564a958e\",\"0x19faaa87edc67b3a03edb38a7690e88bb35f90eaa38556adf4eea04f0a41329b\",\"0x78e2fae5201f6e8b5bcbb7d2cfd9a05b51ee5daac55dc1c67d5bf9496443b124\",\"0x8c473676e83787c7748e9d956e0fd2f316e00dd13771f2cee0367fcf5588f40c\",\"0x6488a7d2ae45fe1f028a2b3d140073efba82aba8db01e9c96d165d515a2b5ead\",\"0xc2baf1c827cfce1eb852561d737b454fe12c7555945ba68017fa6222c93d7f1d\",\"0xc6052c7af376fef1daf078b85913d5b147a68f4c6de75cc9e49399d62a515c92\",\"0xbddc1775065a6ee9386737303af7b9da6ad995c369706fbdcf4a7fcb8cc2cca0\",\"0xd14f617a18014f5bb594e7ca4c999354bc095a6b136a6cd3d097928fe3defd86\",\"0xcfe35d771cfcc111868b623b0885277c74b94f6f5bc544c78c66bc0b5458a524\",\"0x4163b9a6368d125edd8ee3e538f320752b0bd0f113dd79349a72fa3af06c64ab\",\"0x78cb874b15e37a66ae8eee4cf13b1e8af6e63ea72c234067a1023f1f6d989a06\",\"0x13c184ef8cd27a98857dcf2c0a21cefde8808551b4fbc18b1a62b97186662990\",\"0x93584e7b2c0ced44fca221aa0d934cedb1cddb82e0296f041b1934875d505986\",\"0x77865dd539eda3960520bee9cd3e0a8563b9a0ddc854885a1d9dee14b11b3da0\",\"0x8665f83639732248eeba9454540184cc94598e0fe73d126b6e3db31725352f28\",\"0xa322e919186a4b2f2039601db976b005e7b2968e56d75cbf71a77bbe8905292b\",\"0xb995f437374bd1e1a9eb3443bc3d7855f15b4d6ce628051332fe20a3a8cd0e9c\",\"0x75df3f7f39ed5132f0b10ca3d97487eca629128ad37d4e6b5ba391ece4f4702c\",\"0xf59c191e25659b57738ef22ede3d6113091d0425f40ec862de14bf1149fb382e\",\"0xa9588c6ec3513da0ecfdb7967fcf6711ca3566e5ae1b8b60bcc7d54a123f2a07\",\"0x3edc6044a176db79bb6ffccd3f3c950cb5a56b9ba65d4243e9e03cbcf4bbe382\"],\"Pos\":\"0x6\"}},{\"A\":null,\"Ar\":null,\"ArOld\":null,\"CC\":null,\"Out\":{\"Root\":\"0x8008e93e7151f70314b12e5144ef006f6eff91b388430b1b1988ffad72578a05\",\"State\":{\"Num\":2,\"OS\":{\"Index\":4,\"OutCM\":\"0xf1a7a8ba9beb540e0a812e6a81284f6640cdfecf956adab5c513754dac59e409\",\"Out_C\":null,\"Out_O\":{\"Addr\":\"0x10d7e004cb99f3739dc7fc141612ef345e86431ffd3d1d3659e5c0ea3b6f6d02d95fd841981d1f6a1235ca8d53a905586ca9c6bc993cc303898121529f50e5235550a1d48a0d6d95766a459033bf9d8211f97bc8d0b5b59e23f119c59dad8e11\",\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"1000025000000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"},\"Out_P\":null,\"Out_Z\":null,\"RootCM\":\"0xfee9429df3da907e054f6bf446ceac943af4ae31cc643d267d96574b9715b01c\"},\"TxHash\":\"0x0000000000000000000000000000000000000000000000000000000000000001\"}},\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"Vskr\":null,\"Witness\":{\"Anchor\":\"0x8d3fd61a21074cb2626c1901e10cefb4b4fa313f8a18ff34881fcf4073523c0e\",\"Paths\":[\"0x7493731d696f8bedb71c87b3549dc178f4ef34f5fcbaeba9ed56049857a169a6\",\"0x8e3aab268f530c88fa5d62b736fe73a248ad4ea2275769277ff58a477ba58a2a\",\"0x4b825fb0cd04d15e1a77bbdf8ec52abacf321394e6b62547ea1135613c6af592\",\"0x47f3115ed518bf4653b9d967825cd1d3f4b0fdfb2ff3d1d56cecc29feed9d623\",\"0x271be13d21bb65d68ddde723fe4c94c4f3b6166aabe45a685b357ccb286a442c\",\"0x9970271e96d1771eff06ce5c540d6fcf5df59234af6204f45b31ea151c589ba9\",\"0x6eb9d1bbaad7ae8e1ad41b2be597da14321efdbc9c7f4358e6525789d4318c8b\",\"0xa0f4e174f7fe46368a2c4ed56659c672e0187d0bca2e7619660b9e38564a958e\",\"0x19faaa87edc67b3a03edb38a7690e88bb35f90eaa38556adf4eea04f0a41329b\",\"0x78e2fae5201f6e8b5bcbb7d2cfd9a05b51ee5daac55dc1c67d5bf9496443b124\",\"0x8c473676e83787c7748e9d956e0fd2f316e00dd13771f2cee0367fcf5588f40c\",\"0x6488a7d2ae45fe1f028a2b3d140073efba82aba8db01e9c96d165d515a2b5ead\",\"0xc2baf1c827cfce1eb852561d737b454fe12c7555945ba68017fa6222c93d7f1d\",\"0xc6052c7af376fef1daf078b85913d5b147a68f4c6de75cc9e49399d62a515c92\",\"0xbddc1775065a6ee9386737303af7b9da6ad995c369706fbdcf4a7fcb8cc2cca0\",\"0xd14f617a18014f5bb594e7ca4c999354bc095a6b136a6cd3d097928fe3defd86\",\"0xcfe35d771cfcc111868b623b0885277c74b94f6f5bc544c78c66bc0b5458a524\",\"0x4163b9a6368d125edd8ee3e538f320752b0bd0f113dd79349a72fa3af06c64ab\",\"0x78cb874b15e37a66ae8eee4cf13b1e8af6e63ea72c234067a1023f1f6d989a06\",\"0x13c184ef8cd27a98857dcf2c0a21cefde8808551b4fbc18b1a62b97186662990\",\"0x93584e7b2c0ced44fca221aa0d934cedb1cddb82e0296f041b1934875d505986\",\"0x77865dd539eda3960520bee9cd3e0a8563b9a0ddc854885a1d9dee14b11b3da0\",\"0x8665f83639732248eeba9454540184cc94598e0fe73d126b6e3db31725352f28\",\"0xa322e919186a4b2f2039601db976b005e7b2968e56d75cbf71a77bbe8905292b\",\"0xb995f437374bd1e1a9eb3443bc3d7855f15b4d6ce628051332fe20a3a8cd0e9c\",\"0x75df3f7f39ed5132f0b10ca3d97487eca629128ad37d4e6b5ba391ece4f4702c\",\"0xf59c191e25659b57738ef22ede3d6113091d0425f40ec862de14bf1149fb382e\",\"0xa9588c6ec3513da0ecfdb7967fcf6711ca3566e5ae1b8b60bcc7d54a123f2a07\",\"0x3edc6044a176db79bb6ffccd3f3c950cb5a56b9ba65d4243e9e03cbcf4bbe382\"],\"Pos\":\"0x4\"}}],\"Outs\":[{\"Ar\":null,\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"10000000000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0x14cf8d6ed0b966375f031f1ce778e2fc07911c9abe53e65d7d7ea9ecadb45e1e119df7619d2cbfdcf2be545fcaefb492ba2564ce02622b266436b3e649610b1172fc4345b81748c67b24daabe7d5b3461c05608da738c0b59cbc83408629d3ca\"},{\"Ar\":null,\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"990065000000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0x06ff292fb802f720ad76e4ea8d98e4a093f09af3bf5a5c6dc9336c821c3e3e03692bebfd129720b01d0f534b4bc8e10dc474a3a9c1171ccfbf308c2c86a788027d34a53dccf687cbd5a9612d03215eebcddd851399f161f18e0b1c3e245b82ac\"}],\"Z\":true}"

const seed = utils.ToBuffer(seedStr, 32)
const keys = account.NewKeys(seed)

const sk = keys.sk.toString('hex')
console.log(sk)

const tk = keys.tk.toString('hex')
console.log(tk)

const pk = keys.pk.toString('hex')
console.log(pk)

tx.SignTx(
  txParamStr,
  keys.sk.ToBase58(),
  (err, content) => {
    if (err) {
      console.error(err)
    } else {
      console.log(content)
    }
  }
)
