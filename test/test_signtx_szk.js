'use strict'

const newKeysBySeed = require('../index.js').newKeysBySeed
const tx = require('../tx.js')
const utils = require('../utils.js')

const seedStr = utils.ToBuffer('0xc8af51a83c1c039cd40bf335ce6b0e5294e4bb8d9e871304a760920736568537', 32).ToBase58()
const txParamStr = "{\"Cmds\":{\"BuyShare\":null,\"ClosePool\":null,\"Contract\":null,\"PkgClose\":null,\"PkgCreate\":null,\"PkgTransfer\":null,\"RegistPool\":null},\"Fee\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"25000000000000\"},\"From\":{\"PKr\":\"0x84b6e269d61fe94ed991272a4a0eee47240cbd039400a76f4c7c0469f550e8a75b75e7ed0375ad131d60e490753c923b1027728d5b82b5066418b2a75835d610187696a64e19ab34642e9735e74e7bb7f56b0a4e01981daba73a825ce9305d45\",\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"},\"Gas\":25000,\"GasPrice\":1000000000,\"Ins\":[{\"A\":null,\"Ar\":null,\"ArOld\":null,\"CC\":null,\"Out\":{\"Root\":\"0xf33e6cf6736c05c5c0116195754c34a8dd9d1b1c8fcfe5f676bf1297786ee023\",\"State\":{\"Num\":337,\"OS\":{\"Index\":359,\"OutCM\":null,\"Out_C\":{\"AssetCM\":\"0x58549f0963218095e2c4650bf89a191fd590ba31e1b6fb66b69b208b4fbafa01\",\"EInfo\":\"0x96aaf0911c0a7724f16e317bbd2f054ea642e9e12ab147db79261cb05fa211df7ab7dd4b5c8e9865995534efca0c13cc3a82162435ba0b89193d258d5144f1304b9970531e47ed6beff86e4f52533a1e7e29a7d16ec87ea7a5aebdb8adfcc6346f3f758efbd98447ee0d13a5b0afc4711f59e6af33d83986d0cbd298ba7a2aaab8410ab2c17e0b771a0d38123bfa60d4e284981c42fee822fb3ab9ce60c11f072c5640e30a466e98a448809442d4c630fd5ff87069e1825e78711748cac5cd4391f6f17988ecdc1d96dfe687909fb161c688877874487eda869cc7ec15589924\",\"PKr\":\"0x84b6e269d61fe94ed991272a4a0eee47240cbd039400a76f4c7c0469f550e8a75b75e7ed0375ad131d60e490753c923b1027728d5b82b5066418b2a75835d610187696a64e19ab34642e9735e74e7bb7f56b0a4e01981daba73a825ce9305d45\",\"Proof\":\"0x03b437c4c870f26992b45b89b0205b8ba5e81c79eb691e61a1770162257c795f1c0b9cc5bbac72c9c601120a2b6e37908bd2fc622f7d9c5c23b27c7aec255c4d3c67001841e5cca09b9fdc7293c41ed38b09d3729d0b698f39e3b167e14cf2d13a0802ea12a8be004413d640930846b2055943a18d41d5d2ebc2367c8c51740e5d7701\",\"RPK\":\"0xc84fe29b6112f0885490a7542f35678471affae754137bcfe0177e6924fa0b0f\"},\"Out_O\":null,\"Out_P\":null,\"Out_Z\":null,\"RootCM\":\"0xb22b16a82d6a29e7c0069590ee8138724ce5499d15d2ad61acfed4d6bd1412ad\"},\"TxHash\":\"0x1736be7f5bb9cb804711da46a533349821b44d6a16480e1e2fab18602eda39b6\"}},\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"Vskr\":null,\"Witness\":{\"Anchor\":\"0x1df325f7991749cc497b41a8f9f9d6f7238bba3d0efc63e76039748412412525\",\"Paths\":[\"0xad502ea9a2a17e8c4e34296bc1b965f1504d5a926fcbb2d456499d94e34145a7\",\"0x553a880c6eb36fd3d5b9638e9ab20e11e39a157fb5789e26cf29d6064dfd7eae\",\"0x4d16ea0c96ed55fc119c27872a86203b4258e4bf4713fd816a2be5a5f1f8cd1e\",\"0xc7392fc82758a8242b5b714eee9ab0e94c6df90b7f9cd19504668e96ebf58d9b\",\"0x7284f977231cad2cc1c9b3ff28435644b6a696556cdb7bbc57cf6bc6bc153ea9\",\"0xba4e22e5c91456fdfdb9633ec1c5466cfe2a86c83db8497e1d96a4921c32f389\",\"0x3d6920fd1e1295135834bb7111dfed4bf43db2f8e219fa127f6c200680cc3c97\",\"0xf57f2632fe188f663c4bd0215aab05170aeb2abebadd28132ef279c5b49f79ae\",\"0xf9829a5a7807d6ddec6f4d7efc5e2f456f42acb656dc7e96b4e98c85ddaa9781\",\"0x75eb8ed603b7e4ef3f5ad521f318b08030b25ea492ff84bc20773ed75d88570b\",\"0x9bdd82fcd971d4159e17a321242575fc15d6c56151edccc9f312a8d7e75edb2a\",\"0x50813d276f42fc0a25719f10ef573feef34ce47e2cdcdfd8ae0fa17dce70e698\",\"0xcbd115a1efe853defd7fc120b08606fa7f389c3f9425b747950682c1e09deb12\",\"0x80c0d8b03bff5f553da3fc641866ac3afbbf310908569daddf5e0e7092ad62a0\",\"0x7865c55ce8f7cb355aca5f593426d38b5f82bf0b9f4d19784d75ab498b3ca8ac\",\"0x2ceadea63565bfa72235374aa70c6ff9146456dab2a1febb1b83df2bb0b5bf90\",\"0x3686698d6e508112eb93891d48c7b50e12d54914bfdd437076ceaa60ef696e88\",\"0x311565e80def136b1a7838d09a2f1f0bfd7b7ac2a6d04d4cb6cb2efd4b33b011\",\"0x9f3b87c8faa34d9104e865b38b3cb87bc5ff71cb0a36a23b71723fbfd31fa72a\",\"0xdbdbab4b98abd0fb19465930710c700bfb07cede792139f1b4a49f340a161f24\",\"0x68b4a158325154aee284f9aec951c0da13fe4b44c9188973644a7b68f78735ac\",\"0xfb9cbf55b5bb63b8e420be52a51ffcf8bbbe878afc696ca70f3f4f2f3358260c\",\"0x31f7aa53943b9bfe0ccc6f8e25479952f2b446ffa731ef90e45a395b2b4a6e09\",\"0x447bdf93bb335d8b268dc74569477a5717197fe538795acdf6ab63fb3d848a98\",\"0x79808b4393da03ae5d0b064b532972d235b571fbc7d5900fe745834385c6981c\",\"0x042415ac74349b1eb318c113474f3b2373fcf4915f9224208f8a70224c10ac03\",\"0xf3519d004458238b7277d6cae47c966cc1b2131bbc14bb6ad8c95d4b1cb75425\",\"0xbc656cd9fd825411e4f2a1da79073c1bb4083432a6aebb80947be38a94cdba80\",\"0x24378894a012b4e87b04e8d4613b81d1795d87089f83c86f6c42cd8c3c67898e\"],\"Pos\":\"0x167\"}}],\"IsExt\":true,\"Num\":339,\"Outs\":[{\"Ar\":null,\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"1000000000000000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0xc957cba3c62f01c33d434f33fd1420d279ac83d2ed1b502ff86e24c57407d012aa5e38896152f95e5616dadbf07b7492ae5fc607ce365b607881dae000a00288360440c034a2f6d00945f8d9042df839f146e0732b3cecc222e0b3896a8870ce\"},{\"Ar\":null,\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"8999999949999999999000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0x84b6e269d61fe94ed991272a4a0eee47240cbd039400a76f4c7c0469f550e8a75b75e7ed0375ad131d60e490753c923b1027728d5b82b5066418b2a75835d610187696a64e19ab34642e9735e74e7bb7f56b0a4e01981daba73a825ce9305d45\"}],\"Z\":true}"

const seed = utils.ToBuffer(seedStr, 32)
const keys = newKeysBySeed(seed,2)

const sk = keys.sk.toString('hex')
console.log(sk)

const tk = keys.tk.toString('hex')
console.log(tk)

const pk = keys.pk.toString('hex')
console.log(pk)

tx.SignTx(
  txParamStr,
  keys.sk.ToBase58(),
  (err, content) => {
    if (err) {
      console.error(err)
    } else {
      console.log(content)
    }
  }
)
