'use strict'

const newKeysBySeed = require('../index.js').newKeysBySeed
const tx = require('../tx.js')
const utils = require('../utils.js')

const seedStr = utils.ToBuffer('0x465791e8a29c6db6f2078c2bd5a6c08ba3e0e31430287c488771753f7819d257', 32).ToBase58()
const txParamStr = "{\"Cmds\":{\"BuyShare\":null,\"ClosePool\":null,\"Contract\":null,\"PkgClose\":null,\"PkgCreate\":null,\"PkgTransfer\":null,\"RegistPool\":null},\"Fee\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"25000000000000\"},\"From\":{\"PKr\":\"0x26841f6c126b66ca6b124e4347ef10964d8a439424a536a013d2b9e03951c32832d6c610e3b1a383ac6743423add5a9c4f8f5c68ae2c7445a9c9183af4b8e22f0901e3dfaf5b068354576d26ce65c1977e56453cb1f63f79fc334b25eecc6c67\",\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"},\"Gas\":25000,\"GasPrice\":1000000000,\"Ins\":[{\"A\":null,\"Ar\":null,\"ArOld\":null,\"CC\":null,\"Out\":{\"Root\":\"0xb8b817b6f95f83b7e8b17be214bf71b84caf3eb5c32f1e2083878a6975710830\",\"State\":{\"Num\":4,\"OS\":{\"Index\":8,\"OutCM\":null,\"Out_C\":{\"AssetCM\":\"0xce8b1bb7877529df3cfbb8deee2c8cb3b056dc541d17d8f4defd1c1d668ef2a2\",\"EInfo\":\"0x435f3e93999c4c8e54a8ea5a5a4b3cc8ba45f0aa7377ba0f93aa55e1f81f4e46cec807761b237358e32d01a5833a8ef231fb8ae18f8bf3957100dc605604cf0d3278166171ecf545a112f0f84c84ddbbb346210714b5163b0aa0702b53ee880c971fafee1940a2e65380da63e7aa2f465212c86bf271fdd2a73dbd3c24be3f807924ae95bc0530af075ace3fa3bdc5acbf8285b9a064b140718a767f0c764ce9ec033e86b95ffe14305a6dba5ade054789a427f4de3c1770906c0cf33adb68d450c8355bfabfc46823e38e91a7b5705df53d81c1655f7a84f8f6d1890efbd08a\",\"PKr\":\"0x26841f6c126b66ca6b124e4347ef10964d8a439424a536a013d2b9e03951c32832d6c610e3b1a383ac6743423add5a9c4f8f5c68ae2c7445a9c9183af4b8e22f0901e3dfaf5b068354576d26ce65c1977e56453cb1f63f79fc334b25eecc6c67\",\"Proof\":\"0x029eeb7ef6191affd6fe0a5fce9d82f5fc6994469bfcc175d136d502e44b13c9020b96e3f3c038dd0e8456a89b4b34d7ca56db6b28ab562ac7f8db38ad69814c39be8d395950d9edecaad80e4b7d642ed9430293c32699954bf45f18e201abbe960002512b72a8b2e659184e81d757b6ef3a9d92c7a3cc8eface52ce986db05779bd1e\",\"RPK\":\"0x70a0a49c93d6b91ff4edc72e2b4ec7a660711756274c683d9466680c6b55da0e\"},\"Out_O\":null,\"Out_P\":null,\"Out_Z\":null,\"RootCM\":\"0x45e9af8b9faf5c044e976f85ad3ce40b94384310f060cb25254b107f4ca67183\"},\"TxHash\":\"0x2fa650701df9c2be3cc49c9e2154de34f8f5d5c4c47881f68987eb9f508260c7\"}},\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"Vskr\":null,\"Witness\":{\"Anchor\":\"0x353fbe1c906b9adb05418ad8b6d3756f3847ceb8ad76e02685c9cdcf1a524f27\",\"Paths\":[\"0xa5c1920d7ecabe1a84574599c084e037cbf8a9ac3216e7d6197cbbd589defd9a\",\"0xcc36edb1e5c63948d03e509cf227be37bb32baeb45fbaf479a723b24767b120d\",\"0x692a552a1f17eafd06dac83bc131c014a56de946a657915e163d48546390ce84\",\"0x7d140189f86ac83210a4c71d735221d70ea8ee18157b4e5436c5b2d40703d381\",\"0x7284f977231cad2cc1c9b3ff28435644b6a696556cdb7bbc57cf6bc6bc153ea9\",\"0x9cda5493957ef78fa117f61252eb9b79e835906dd62f4f230964b4c2b790b892\",\"0xff3bd1141de02f0c80b435835dbb245fd5f47295e94df8935269940ae3940209\",\"0xf57f2632fe188f663c4bd0215aab05170aeb2abebadd28132ef279c5b49f79ae\",\"0xc0f73a47ede0ce8d04cc301e0ecd44148fbf887068b153e297550690fe67061f\",\"0x75eb8ed603b7e4ef3f5ad521f318b08030b25ea492ff84bc20773ed75d88570b\",\"0x9bdd82fcd971d4159e17a321242575fc15d6c56151edccc9f312a8d7e75edb2a\",\"0x50813d276f42fc0a25719f10ef573feef34ce47e2cdcdfd8ae0fa17dce70e698\",\"0xcbd115a1efe853defd7fc120b08606fa7f389c3f9425b747950682c1e09deb12\",\"0x80c0d8b03bff5f553da3fc641866ac3afbbf310908569daddf5e0e7092ad62a0\",\"0x7865c55ce8f7cb355aca5f593426d38b5f82bf0b9f4d19784d75ab498b3ca8ac\",\"0x2ceadea63565bfa72235374aa70c6ff9146456dab2a1febb1b83df2bb0b5bf90\",\"0x3686698d6e508112eb93891d48c7b50e12d54914bfdd437076ceaa60ef696e88\",\"0x311565e80def136b1a7838d09a2f1f0bfd7b7ac2a6d04d4cb6cb2efd4b33b011\",\"0x9f3b87c8faa34d9104e865b38b3cb87bc5ff71cb0a36a23b71723fbfd31fa72a\",\"0xdbdbab4b98abd0fb19465930710c700bfb07cede792139f1b4a49f340a161f24\",\"0x68b4a158325154aee284f9aec951c0da13fe4b44c9188973644a7b68f78735ac\",\"0xfb9cbf55b5bb63b8e420be52a51ffcf8bbbe878afc696ca70f3f4f2f3358260c\",\"0x31f7aa53943b9bfe0ccc6f8e25479952f2b446ffa731ef90e45a395b2b4a6e09\",\"0x447bdf93bb335d8b268dc74569477a5717197fe538795acdf6ab63fb3d848a98\",\"0x79808b4393da03ae5d0b064b532972d235b571fbc7d5900fe745834385c6981c\",\"0x042415ac74349b1eb318c113474f3b2373fcf4915f9224208f8a70224c10ac03\",\"0xf3519d004458238b7277d6cae47c966cc1b2131bbc14bb6ad8c95d4b1cb75425\",\"0xbc656cd9fd825411e4f2a1da79073c1bb4083432a6aebb80947be38a94cdba80\",\"0x24378894a012b4e87b04e8d4613b81d1795d87089f83c86f6c42cd8c3c67898e\"],\"Pos\":\"0x8\"}}],\"Outs\":[{\"Ar\":null,\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"10000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0x1533d0bd8a057cbeb09cd53951b4a1b3e98a40e5164618ed5c633ba61109f71e6a17e044eb4ddc286094af180a79ea5649d3b5416bd56ca5bf28feec96fca127416bfff36553d2f903382c52a2353f63e71257d1bf1fc774b233b09be86de1c7\"},{\"Ar\":null,\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"999974990000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0x26841f6c126b66ca6b124e4347ef10964d8a439424a536a013d2b9e03951c32832d6c610e3b1a383ac6743423add5a9c4f8f5c68ae2c7445a9c9183af4b8e22f0901e3dfaf5b068354576d26ce65c1977e56453cb1f63f79fc334b25eecc6c67\"}],\"Z\":true}"

const seed = utils.ToBuffer(seedStr, 32)
const keys = newKeysBySeed(seed,2)

const sk = keys.sk.toString('hex')
console.log(sk)

const tk = keys.tk.toString('hex')
console.log(tk)

const pk = keys.pk.toString('hex')
console.log(pk)

tx.SignTx(
  txParamStr,
  keys.sk.ToBase58(),
  (err, content) => {
    if (err) {
      console.error(err)
    } else {
      console.log(content)
    }
  }
)
