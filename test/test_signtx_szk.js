'use strict'

const account = require('../account.js')
const tx = require('../tx.js')
const utils = require('../utils.js')

const seedStr = utils.ToBuffer('0xd31ac624f48d9f93dd09728956041659b5e0e574fc83c1ac35c78b20894f2b4b', 32).ToBase58()
const txParamStr = "{\"Z\":true,\"Cmds\":{\"BuyShare\":null,\"ClosePool\":null,\"Contract\":null,\"PkgClose\":null,\"PkgCreate\":null,\"PkgTransfer\":null,\"RegistPool\":null},\"Fee\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"25000000000000\"},\"From\":{\"PKr\":\"0x5df2a71998ba2706c69ee6cf3dbc5439524f4d52eb1ead62bf51290ab9a7d821b4b4242789cab2828cd9e042bd85661deb04f1e7081ec99d9f5be94fa20582926fe92e011b4548145b2f9bbdd9b1ce1b2cccec226db3c92bd26a3543a641f92a\",\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"},\"Gas\":25000,\"GasPrice\":1000000000,\"Ins\":[{\"Out\":{\"Root\":\"0x6b3783a911c6a7bf8df6b12f6fdf530b5f7d0751dba34970b4d9cfe758647d14\",\"State\":{\"Num\":10,\"OS\":{\"Index\":10,\"OutCM\":null,\"Out_O\":null,\"Out_Z\":{\"AssetCM\":\"0x50bf4f87632bf193e3ecbabcaad705d6407052ba493800a0798b427813daba99\",\"EInfo\":\"0x5fd27eff59c7c65b8846b553e20525d254e666161351d713dd4fa0f35910f2816dacc499e925de1721306aab953c47b21b90534c7a8380822839960ae82d7ff790c30e5630ea4cf13ea41b01839f6296e072417d8da770846b0ce999c0abdadb6e894d55acd30a6c42c46c31abe8f590c9079404e1a97d1ce120c7e1609ef6bf9ef6c0defc838a940dd8937a9fba7f86ffdec9b418b2d192d4ce8c862e52a7a802f9ba6aec39490c61229a82fc701a4ddba70abd107a960d370adcda550b29c100017f99e0e8857cd3fb46cced37424cead03743ee58dda1e3af841d8b10df51\",\"OutCM\":\"0xc405221a10e0c216f651af4867adfafa7c4bb7731694763354b26ce2a382cc13\",\"PKr\":\"0x55a97fb71bbd8bbe3098d7777956e90902fec2d6567ad66dd99f8cbd5ddd8fad65707ac0d06d810e2fd5b719f53936fe30387a0532baf03bd4e3bf857e0ebfadb792be202ac2cfa628db2ac7dcd7e95158e5522db2b6ed545f92ca1add4d49a1\",\"Proof\":\"0x032eafa2695e88462f4e7d95519607ef134202bdd0c8b830867e01f38139d7460f0abff456d63c6ec1efe5c34681918d6cb8b80d48cdbe614b140b8a16e26e5bb1f5b49aea45442f3699f3694673b5613eedec4069e02623ab1a745dba104fe1d80402b1583de02121466f04c05d8c8fd77fc8ff2c8dca805eb392d4237d1a5132d617\",\"RPK\":\"0x9198d5bfef5ac5c7f41009c7015b23815aedf8c23d51f9b1cf627fa6397196e3\"},\"RootCM\":\"0x1927f7a27ab6082018577a435c3aa766b2cf86ec8fb6202fd6eb8535b8af73a8\"},\"TxHash\":\"0xd7437c90979a9f93ddae9549899ec94ac6420363e52e8eee0250d119b1227178\"}},\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"Witness\":{\"Anchor\":\"0xe3506d591b0c8f0a3d15be47d35aa4d96cda41731977c924f08dc8166bfdae8d\",\"Paths\":[\"0x54c85695d5f6dee440f01da75a51b04bdd6cfb4be981489ff6bb0edd44b4fb0f\",\"0xfca37467de32b932bf9f3b81e616ea0d3732b436ac38eaf849d099a9a018ad13\",\"0xb36718060dc8d80d893697ecb32b485afdd9fd86211333fc6984131938a8a60d\",\"0x86741f94bc0560ab2687edf567ba1314a69249ebd4f311d55303c981b7541d84\",\"0x271be13d21bb65d68ddde723fe4c94c4f3b6166aabe45a685b357ccb286a442c\",\"0x9970271e96d1771eff06ce5c540d6fcf5df59234af6204f45b31ea151c589ba9\",\"0x6eb9d1bbaad7ae8e1ad41b2be597da14321efdbc9c7f4358e6525789d4318c8b\",\"0xa0f4e174f7fe46368a2c4ed56659c672e0187d0bca2e7619660b9e38564a958e\",\"0x19faaa87edc67b3a03edb38a7690e88bb35f90eaa38556adf4eea04f0a41329b\",\"0x78e2fae5201f6e8b5bcbb7d2cfd9a05b51ee5daac55dc1c67d5bf9496443b124\",\"0x8c473676e83787c7748e9d956e0fd2f316e00dd13771f2cee0367fcf5588f40c\",\"0x6488a7d2ae45fe1f028a2b3d140073efba82aba8db01e9c96d165d515a2b5ead\",\"0xc2baf1c827cfce1eb852561d737b454fe12c7555945ba68017fa6222c93d7f1d\",\"0xc6052c7af376fef1daf078b85913d5b147a68f4c6de75cc9e49399d62a515c92\",\"0xbddc1775065a6ee9386737303af7b9da6ad995c369706fbdcf4a7fcb8cc2cca0\",\"0xd14f617a18014f5bb594e7ca4c999354bc095a6b136a6cd3d097928fe3defd86\",\"0xcfe35d771cfcc111868b623b0885277c74b94f6f5bc544c78c66bc0b5458a524\",\"0x4163b9a6368d125edd8ee3e538f320752b0bd0f113dd79349a72fa3af06c64ab\",\"0x78cb874b15e37a66ae8eee4cf13b1e8af6e63ea72c234067a1023f1f6d989a06\",\"0x13c184ef8cd27a98857dcf2c0a21cefde8808551b4fbc18b1a62b97186662990\",\"0x93584e7b2c0ced44fca221aa0d934cedb1cddb82e0296f041b1934875d505986\",\"0x77865dd539eda3960520bee9cd3e0a8563b9a0ddc854885a1d9dee14b11b3da0\",\"0x8665f83639732248eeba9454540184cc94598e0fe73d126b6e3db31725352f28\",\"0xa322e919186a4b2f2039601db976b005e7b2968e56d75cbf71a77bbe8905292b\",\"0xb995f437374bd1e1a9eb3443bc3d7855f15b4d6ce628051332fe20a3a8cd0e9c\",\"0x75df3f7f39ed5132f0b10ca3d97487eca629128ad37d4e6b5ba391ece4f4702c\",\"0xf59c191e25659b57738ef22ede3d6113091d0425f40ec862de14bf1149fb382e\",\"0xa9588c6ec3513da0ecfdb7967fcf6711ca3566e5ae1b8b60bcc7d54a123f2a07\",\"0x3edc6044a176db79bb6ffccd3f3c950cb5a56b9ba65d4243e9e03cbcf4bbe382\"],\"Pos\":\"0xa\"}}],\"Outs\":[{\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"1000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0x1da430ae0b5e809de9260fa67dff5057160483ccf03f0a6bcb5fb2b573e6ce2bd7e8efb271a0822dcc917406e765763720dd1d3d456dc62232bdb050ac7161920f1f84c661ed065b0df24850b00de5de58b4f50bbe44ebcf70c2d40af27b0126\"},{\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"1999974999999999000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0x5df2a71998ba2706c69ee6cf3dbc5439524f4d52eb1ead62bf51290ab9a7d821b4b4242789cab2828cd9e042bd85661deb04f1e7081ec99d9f5be94fa20582926fe92e011b4548145b2f9bbdd9b1ce1b2cccec226db3c92bd26a3543a641f92a\"}]}"

const seed = utils.ToBuffer(seedStr, 32)
const keys = account.NewKeys(seed)

const sk = keys.sk.toString('hex')
console.log(sk)

const tk = keys.tk.toString('hex')
console.log(tk)

const pk = keys.pk.toString('hex')
console.log(pk)

tx.SignTx(
  txParamStr,
  keys.sk.ToBase58(),
  (err, content) => {
    if (err) {
      console.error(err)
    } else {
      console.log(content)
    }
  }
)
