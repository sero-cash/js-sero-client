'use strict'

const newKeysBySeed = require('../index.js').newKeysBySeed
const tx = require('../tx.js')
const utils = require('../utils.js')

const seedStr = utils.ToBuffer('0xfd04709b578833f6d86f2d83a1764a95a17181c3a71161e48c0fc30e58904586', 32).ToBase58()
const txParamStr = "{\"Cmds\":{\"BuyShare\":null,\"ClosePool\":null,\"Contract\":null,\"PkgClose\":null,\"PkgCreate\":null,\"PkgTransfer\":null,\"RegistPool\":null},\"Fee\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"25000000000000\"},\"From\":{\"PKr\":\"0xc1b6f478baf777df20f6a46cf335c0c74f396e9293618a6a1dc5f890efa5fda3c6f5db1184c3a6092463595b2059e69c2667e9716d6842e76ab31d67fe31d601a5ac694b5caf937daeac748fe30096aa57ab6931a359c9c7d94b740ad09bf360\",\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"},\"Gas\":25000,\"GasPrice\":1000000000,\"Ins\":[{\"A\":null,\"Ar\":null,\"ArOld\":null,\"CC\":null,\"Out\":{\"Root\":\"0xbb94460d333b415a506de3b11a0a4b351af38ad10b61d7e6f888f089d5b31984\",\"State\":{\"Num\":151,\"OS\":{\"Index\":0,\"OutCM\":null,\"Out_C\":null,\"Out_O\":null,\"Out_P\":{\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"10000000000000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0x5835cdf1f7eadf9301d6dd4ae68f69bddc9725e1cd6fa3ba7143d745d956e00647df3322658e7b20c85ae9bb39940794107c46f40d560a11fd32b17b7430c1961c3feed30d70bf96c6499daaf9631243702c15f2ce1656dcee0a186c4a5d56e7\"},\"Out_Z\":null,\"RootCM\":\"0x8ab57a9e143d49c873699d006d1b97b89a11c46505dd28ca59ba51c64ee9b085\"},\"TxHash\":\"0x56596413d7433e5741f38bc78c9960b874599223e629e181d4a49912bac34328\"}},\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"Vskr\":null,\"Witness\":{\"Anchor\":\"0xbe6873bd325f474972434c2ebb17b92e0ce631e27abae8a957f6e147d5a5d59d\",\"Paths\":[\"0x1fc6de123f378dd37567d5edf7a565cde6ffc3e58a882a02680de64feceaf30c\",\"0x0100000000000000000000000000000000000000000000000000000000000000\",\"0x692a552a1f17eafd06dac83bc131c014a56de946a657915e163d48546390ce84\",\"0x130adf7ac88bef31232230e2954ce96f35945f640c7517930ab14d89a995bc1c\",\"0x7284f977231cad2cc1c9b3ff28435644b6a696556cdb7bbc57cf6bc6bc153ea9\",\"0x9cda5493957ef78fa117f61252eb9b79e835906dd62f4f230964b4c2b790b892\",\"0xff3bd1141de02f0c80b435835dbb245fd5f47295e94df8935269940ae3940209\",\"0xf57f2632fe188f663c4bd0215aab05170aeb2abebadd28132ef279c5b49f79ae\",\"0xc0f73a47ede0ce8d04cc301e0ecd44148fbf887068b153e297550690fe67061f\",\"0x75eb8ed603b7e4ef3f5ad521f318b08030b25ea492ff84bc20773ed75d88570b\",\"0x9bdd82fcd971d4159e17a321242575fc15d6c56151edccc9f312a8d7e75edb2a\",\"0x50813d276f42fc0a25719f10ef573feef34ce47e2cdcdfd8ae0fa17dce70e698\",\"0xcbd115a1efe853defd7fc120b08606fa7f389c3f9425b747950682c1e09deb12\",\"0x80c0d8b03bff5f553da3fc641866ac3afbbf310908569daddf5e0e7092ad62a0\",\"0x7865c55ce8f7cb355aca5f593426d38b5f82bf0b9f4d19784d75ab498b3ca8ac\",\"0x2ceadea63565bfa72235374aa70c6ff9146456dab2a1febb1b83df2bb0b5bf90\",\"0x3686698d6e508112eb93891d48c7b50e12d54914bfdd437076ceaa60ef696e88\",\"0x311565e80def136b1a7838d09a2f1f0bfd7b7ac2a6d04d4cb6cb2efd4b33b011\",\"0x9f3b87c8faa34d9104e865b38b3cb87bc5ff71cb0a36a23b71723fbfd31fa72a\",\"0xdbdbab4b98abd0fb19465930710c700bfb07cede792139f1b4a49f340a161f24\",\"0x68b4a158325154aee284f9aec951c0da13fe4b44c9188973644a7b68f78735ac\",\"0xfb9cbf55b5bb63b8e420be52a51ffcf8bbbe878afc696ca70f3f4f2f3358260c\",\"0x31f7aa53943b9bfe0ccc6f8e25479952f2b446ffa731ef90e45a395b2b4a6e09\",\"0x447bdf93bb335d8b268dc74569477a5717197fe538795acdf6ab63fb3d848a98\",\"0x79808b4393da03ae5d0b064b532972d235b571fbc7d5900fe745834385c6981c\",\"0x042415ac74349b1eb318c113474f3b2373fcf4915f9224208f8a70224c10ac03\",\"0xf3519d004458238b7277d6cae47c966cc1b2131bbc14bb6ad8c95d4b1cb75425\",\"0xbc656cd9fd825411e4f2a1da79073c1bb4083432a6aebb80947be38a94cdba80\",\"0x24378894a012b4e87b04e8d4613b81d1795d87089f83c86f6c42cd8c3c67898e\"],\"Pos\":\"0x0\"}},{\"A\":null,\"Ar\":null,\"ArOld\":null,\"CC\":null,\"Out\":{\"Root\":\"0xbe6873bd325f474972434c2ebb17b92e0ce631e27abae8a957f6e147d5a5d59d\",\"State\":{\"Num\":152,\"OS\":{\"Index\":1,\"OutCM\":null,\"Out_C\":null,\"Out_O\":null,\"Out_P\":{\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"10000000000000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0x5835cdf1f7eadf9301d6dd4ae68f69bddc9725e1cd6fa3ba7143d745d956e00647df3322658e7b20c85ae9bb39940794107c46f40d560a11fd32b17b7430c1961c3feed30d70bf96c6499daaf9631243702c15f2ce1656dcee0a186c4a5d56e7\"},\"Out_Z\":null,\"RootCM\":\"0x1fc6de123f378dd37567d5edf7a565cde6ffc3e58a882a02680de64feceaf30c\"},\"TxHash\":\"0x4ef4075d63eaf24463eb056ee3557baddbab7347042d035237a1aae08b511aec\"}},\"SKr\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"Vskr\":null,\"Witness\":{\"Anchor\":\"0xbe6873bd325f474972434c2ebb17b92e0ce631e27abae8a957f6e147d5a5d59d\",\"Paths\":[\"0x8ab57a9e143d49c873699d006d1b97b89a11c46505dd28ca59ba51c64ee9b085\",\"0x0100000000000000000000000000000000000000000000000000000000000000\",\"0x692a552a1f17eafd06dac83bc131c014a56de946a657915e163d48546390ce84\",\"0x130adf7ac88bef31232230e2954ce96f35945f640c7517930ab14d89a995bc1c\",\"0x7284f977231cad2cc1c9b3ff28435644b6a696556cdb7bbc57cf6bc6bc153ea9\",\"0x9cda5493957ef78fa117f61252eb9b79e835906dd62f4f230964b4c2b790b892\",\"0xff3bd1141de02f0c80b435835dbb245fd5f47295e94df8935269940ae3940209\",\"0xf57f2632fe188f663c4bd0215aab05170aeb2abebadd28132ef279c5b49f79ae\",\"0xc0f73a47ede0ce8d04cc301e0ecd44148fbf887068b153e297550690fe67061f\",\"0x75eb8ed603b7e4ef3f5ad521f318b08030b25ea492ff84bc20773ed75d88570b\",\"0x9bdd82fcd971d4159e17a321242575fc15d6c56151edccc9f312a8d7e75edb2a\",\"0x50813d276f42fc0a25719f10ef573feef34ce47e2cdcdfd8ae0fa17dce70e698\",\"0xcbd115a1efe853defd7fc120b08606fa7f389c3f9425b747950682c1e09deb12\",\"0x80c0d8b03bff5f553da3fc641866ac3afbbf310908569daddf5e0e7092ad62a0\",\"0x7865c55ce8f7cb355aca5f593426d38b5f82bf0b9f4d19784d75ab498b3ca8ac\",\"0x2ceadea63565bfa72235374aa70c6ff9146456dab2a1febb1b83df2bb0b5bf90\",\"0x3686698d6e508112eb93891d48c7b50e12d54914bfdd437076ceaa60ef696e88\",\"0x311565e80def136b1a7838d09a2f1f0bfd7b7ac2a6d04d4cb6cb2efd4b33b011\",\"0x9f3b87c8faa34d9104e865b38b3cb87bc5ff71cb0a36a23b71723fbfd31fa72a\",\"0xdbdbab4b98abd0fb19465930710c700bfb07cede792139f1b4a49f340a161f24\",\"0x68b4a158325154aee284f9aec951c0da13fe4b44c9188973644a7b68f78735ac\",\"0xfb9cbf55b5bb63b8e420be52a51ffcf8bbbe878afc696ca70f3f4f2f3358260c\",\"0x31f7aa53943b9bfe0ccc6f8e25479952f2b446ffa731ef90e45a395b2b4a6e09\",\"0x447bdf93bb335d8b268dc74569477a5717197fe538795acdf6ab63fb3d848a98\",\"0x79808b4393da03ae5d0b064b532972d235b571fbc7d5900fe745834385c6981c\",\"0x042415ac74349b1eb318c113474f3b2373fcf4915f9224208f8a70224c10ac03\",\"0xf3519d004458238b7277d6cae47c966cc1b2131bbc14bb6ad8c95d4b1cb75425\",\"0xbc656cd9fd825411e4f2a1da79073c1bb4083432a6aebb80947be38a94cdba80\",\"0x24378894a012b4e87b04e8d4613b81d1795d87089f83c86f6c42cd8c3c67898e\"],\"Pos\":\"0x1\"}}],\"Outs\":[{\"Ar\":null,\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"10000000000000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0xecb07649754ac7e6a79976fd65df47b329e8318de13d2279bffae94b8a81fd2f24073818b4a905e984400dcfb2562aee2dfb34aeb3cf191c077a7ba8a7bd7a8a86052857bc37ca3aea0444b95d25712b982203e8d60def43f9a477e48ae7fde3\"},{\"Ar\":null,\"Asset\":{\"Tkn\":{\"Currency\":\"0x000000000000000000000000000000000000000000000000000000005345524f\",\"Value\":\"9999975000000000000\"},\"Tkt\":null},\"Memo\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"PKr\":\"0xc1b6f478baf777df20f6a46cf335c0c74f396e9293618a6a1dc5f890efa5fda3c6f5db1184c3a6092463595b2059e69c2667e9716d6842e76ab31d67fe31d601a5ac694b5caf937daeac748fe30096aa57ab6931a359c9c7d94b740ad09bf360\"}],\"Z\":true}"

const seed = utils.ToBuffer(seedStr, 32)
const keys = newKeysBySeed(seed,2)

const sk = keys.sk.toString('hex')
console.log(sk)

const tk = keys.tk.toString('hex')
console.log(tk)

const pk = keys.pk.toString('hex')
console.log(pk)

tx.SignTx(
  txParamStr,
  keys.sk.ToBase58(),
  (err, content) => {
    if (err) {
      console.error(err)
    } else {
      console.log(content)
    }
  }
)
